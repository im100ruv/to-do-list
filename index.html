<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>To Do App</title>
</head>
<body>
  <main>
    <input id="new-task" name="new-task" type="text" placeholder="enter task" value="">
    <input type="submit" value="Add" onclick="addTask()">

    <div id="task-list" name="task-list" class="task-list">
    </div>
    <div id="info"> 0 tasks</div>
  </main>

  <script>
    let total = 0;
    let count = 0;
    let completed = 0;

    function addTask() {
      const newTask = document.getElementById('new-task').value;

      const newItem = document.createElement("div");
      newItem.setAttribute("id", total);
      newItem.innerHTML = `<input type="checkbox" value="${newTask}" onchange="markItem(${total})"> <label> ${newTask} </label><span style="cursor:pointer;" onclick="removeTask(${total})">&times;</span> <br>`;

      document.getElementById('task-list').appendChild(newItem);
      total++;
      count++;

      document.getElementById('info').innerHTML = `${count} tasks  ${completed} completed`;
      document.getElementById('new-task').value = "";
    }

    function removeTask(idNum) {
      const item = document.getElementById('task-list');
      // item.removeChild(item.childNodes[idNum]);
      item.removeChild(document.getElementById(idNum));
      count--;
      document.getElementById('info').innerHTML = `${count} tasks`;
    }

    function markItem(idNum) {
      const item = document.getElementById(idNum);
      if(item.getElementsByTagName("input")[0].checked) {
        item.getElementsByTagName("label")[0].style.textDecoration = "line-through";
        completed++;
        document.getElementById('info').innerHTML = `${count} tasks  ${completed} completed`;
      } else {
        item.getElementsByTagName("label")[0].style.textDecoration = "none";
        completed--;
        document.getElementById('info').innerHTML = `${count} tasks  ${completed} completed`;
      }
      
    }
  </script>
</body>
</html>